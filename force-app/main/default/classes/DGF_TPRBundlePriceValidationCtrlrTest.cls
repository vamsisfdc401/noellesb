@isTest
public class DGF_TPRBundlePriceValidationCtrlrTest {
    static testmethod void scenario1(){
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c=null;
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='SD';
        pricRec.Territory__c='US';
        pricRec.Price_Type__c='TPR National';
        pricRec.WSP__c=70;
        pricRec.SRP__c=80;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c=null;
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='SD';
        pricRec1.Territory__c='US';
        pricRec1.Price_Type__c='TPR National';
        pricRec1.WSP__c=60;
        pricRec1.SRP__c=55;
        insert pricRec1;
        /*Pricing__c pricRec2 = new Pricing__c();
        pricRec2.Account__c=null;
        pricRec2.product__c=Prod.id;
        pricRec2.promotion__c=promotion.id;
        pricRec2.platform__C='EST';
        pricRec2.Valid_To__c=system.today().adddays(15);
        pricRec2.Valid_From__c=system.today().adddays(7);
        pricRec2.resolution__c='HD';
        pricRec2.Territory__c='US';
        pricRec2.Price_Type__c='TPR National';
        pricRec2.WSP__c=10;
        pricRec2.SRP__c=40;
        insert pricRec2;
        Pricing__c pricRec3 = new Pricing__c();
        pricRec3.Account__c=null;
        pricRec3.product__c=Prod.id;
        pricRec3.promotion__c=promotion.id;
        pricRec3.platform__C='EST';
        pricRec3.Valid_To__c=system.today().adddays(15);
        pricRec3.Valid_From__c=system.today().adddays(8);
        pricRec3.resolution__c='HD';
        pricRec3.Territory__c='US';
        pricRec3.Price_Type__c='TPR National';
        pricRec3.WSP__c=10;
        pricRec3.SRP__c=25;
        insert pricRec3;*/
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c=null;
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='SD';
        pricRec4.Territory__c='US';
        pricRec4.Price_Type__c='TPR National';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c=null;
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='SD';
        pricRec5.Territory__c='US';
        pricRec5.Price_Type__c='TPR National';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
        //try{
            DGF_TPRBundlePriceValidationController.validateBundlesInTPR(promotion.id);
        //}
        //catch(exception e){
            
        //}
        system.test.stoptest();
    }
    static testmethod void scenario2(){
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c=null;
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='HD';
        pricRec.Territory__c='US';
        pricRec.Price_Type__c='TPR National';
        pricRec.WSP__c=10;
        pricRec.SRP__c=40;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c=null;
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='HD';
        pricRec1.Territory__c='US';
        pricRec1.Price_Type__c='TPR National';
        pricRec1.WSP__c=10;
        pricRec1.SRP__c=25;
        insert pricRec1;
        
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c=null;
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='HD';
        pricRec4.Territory__c='US';
        pricRec4.Price_Type__c='TPR National';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c=null;
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='HD';
        pricRec5.Territory__c='US';
        pricRec5.Price_Type__c='TPR National';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
        //try{
            DGF_TPRBundlePriceValidationController.validateBundlesInTPR(promotion.id);
        //}
        //catch(exception e){
            
        //}
        system.test.stoptest();
    }
    static testmethod void scenario3(){
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c=null;
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='UHD';
        pricRec.Territory__c='US';
        pricRec.Price_Type__c='TPR National';
        pricRec.WSP__c=10;
        pricRec.SRP__c=40;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c=null;
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='UHD';
        pricRec1.Territory__c='US';
        pricRec1.Price_Type__c='TPR National';
        pricRec1.WSP__c=10;
        pricRec1.SRP__c=25;
        insert pricRec1;
        
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c=null;
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='UHD';
        pricRec4.Territory__c='US';
        pricRec4.Price_Type__c='TPR National';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c=null;
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='UHD';
        pricRec5.Territory__c='US';
        pricRec5.Price_Type__c='TPR National';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
        //try{
            DGF_TPRBundlePriceValidationController.validateBundlesInTPR(promotion.id);
        //}
        //catch(exception e){
            
        //}
        system.test.stoptest();
    }
    static testmethod void scenario4(){
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c=null;
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='SD';
        pricRec.Territory__c='CA';
        pricRec.Price_Type__c='TPR National';
        pricRec.WSP__c=70;
        pricRec.SRP__c=80;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c=null;
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='SD';
        pricRec1.Territory__c='CA';
        pricRec1.Price_Type__c='TPR National';
        pricRec1.WSP__c=70;
        pricRec1.SRP__c=55;
        insert pricRec1;
        /*Pricing__c pricRec2 = new Pricing__c();
        pricRec2.Account__c=null;
        pricRec2.product__c=Prod.id;
        pricRec2.promotion__c=promotion.id;
        pricRec2.platform__C='EST';
        pricRec2.Valid_To__c=system.today().adddays(15);
        pricRec2.Valid_From__c=system.today().adddays(7);
        pricRec2.resolution__c='HD';
        pricRec2.Territory__c='US';
        pricRec2.Price_Type__c='TPR National';
        pricRec2.WSP__c=10;
        pricRec2.SRP__c=40;
        insert pricRec2;
        Pricing__c pricRec3 = new Pricing__c();
        pricRec3.Account__c=null;
        pricRec3.product__c=Prod.id;
        pricRec3.promotion__c=promotion.id;
        pricRec3.platform__C='EST';
        pricRec3.Valid_To__c=system.today().adddays(15);
        pricRec3.Valid_From__c=system.today().adddays(8);
        pricRec3.resolution__c='HD';
        pricRec3.Territory__c='US';
        pricRec3.Price_Type__c='TPR National';
        pricRec3.WSP__c=10;
        pricRec3.SRP__c=25;
        insert pricRec3;*/
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c=null;
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='SD';
        pricRec4.Territory__c='CA';
        pricRec4.Price_Type__c='TPR National';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c=null;
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='SD';
        pricRec5.Territory__c='CA';
        pricRec5.Price_Type__c='TPR National';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
        //try{
            DGF_TPRBundlePriceValidationController.validateBundlesInTPR(promotion.id);
        //}
        //catch(exception e){
            
        //}
        system.test.stoptest();
    }
    static testmethod void scenario5(){
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c=null;
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='HD';
        pricRec.Territory__c='CA';
        pricRec.Price_Type__c='TPR National';
        pricRec.WSP__c=10;
        pricRec.SRP__c=40;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c=null;
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='HD';
        pricRec1.Territory__c='CA';
        pricRec1.Price_Type__c='TPR National';
        pricRec1.WSP__c=10;
        pricRec1.SRP__c=25;
        insert pricRec1;
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c=null;
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='HD';
        pricRec4.Territory__c='CA';
        pricRec4.Price_Type__c='TPR National';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c=null;
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='HD';
        pricRec5.Territory__c='CA';
        pricRec5.Price_Type__c='TPR National';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
        //try{
            DGF_TPRBundlePriceValidationController.validateBundlesInTPR(promotion.id);
        //}
        //catch(exception e){
            
        //}
        system.test.stoptest();
    }
    static testmethod void scenario6(){
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c=null;
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='UHD';
        pricRec.Territory__c='CA';
        pricRec.Price_Type__c='TPR National';
        pricRec.WSP__c=10;
        pricRec.SRP__c=40;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c=null;
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='UHD';
        pricRec1.Territory__c='CA';
        pricRec1.Price_Type__c='TPR National';
        pricRec1.WSP__c=10;
        pricRec1.SRP__c=25;
        insert pricRec1;
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c=null;
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='UHD';
        pricRec4.Territory__c='CA';
        pricRec4.Price_Type__c='TPR National';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c=null;
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='UHD';
        pricRec5.Territory__c='CA';
        pricRec5.Price_Type__c='TPR National';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
        //try{
            DGF_TPRBundlePriceValidationController.validateBundlesInTPR(promotion.id);
        //}
        //catch(exception e){
            
        //}
        system.test.stoptest();
    }
    //test scenarios to cover the validateBundlesInAccountTPR
    static testmethod void scenario7(){
        account act = new account();
        act.name = 'iTunes account';
        insert act;
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c='iTunes';
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='SD';
        pricRec.Territory__c='US';
        pricRec.Price_Type__c='Original';
        pricRec.WSP__c=70;
        pricRec.SRP__c=80;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c='iTunes';
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='SD';
        pricRec1.Territory__c='US';
        pricRec1.Price_Type__c='Original';
        pricRec1.WSP__c=60;
        pricRec1.SRP__c=55;
        insert pricRec1;
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c='iTunes';
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='SD';
        pricRec4.Territory__c='US';
        pricRec4.Price_Type__c='Original';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c='iTunes';
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='SD';
        pricRec5.Territory__c='US';
        pricRec5.Price_Type__c='Original';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
            DGF_TPRBundlePriceValidationController.validateBundlesInAccountTPR(promotion.id,act.id);
        system.test.stoptest();
    }
    static testmethod void scenario8(){
        account act = new account();
        act.name = 'iTunes account';
        insert act;
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c='iTunes';
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='HD';
        pricRec.Territory__c='US';
        pricRec.Price_Type__c='Original';
        pricRec.WSP__c=70;
        pricRec.SRP__c=80;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c='iTunes';
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='HD';
        pricRec1.Territory__c='US';
        pricRec1.Price_Type__c='Original';
        pricRec1.WSP__c=60;
        pricRec1.SRP__c=55;
        insert pricRec1;
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c='iTunes';
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='HD';
        pricRec4.Territory__c='US';
        pricRec4.Price_Type__c='Original';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c='iTunes';
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='HD';
        pricRec5.Territory__c='US';
        pricRec5.Price_Type__c='Original';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
            DGF_TPRBundlePriceValidationController.validateBundlesInAccountTPR(promotion.id,act.id);
        system.test.stoptest();
    }
    static testmethod void scenario9(){
        account act = new account();
        act.name = 'iTunes account';
        insert act;
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c='iTunes';
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='UHD';
        pricRec.Territory__c='US';
        pricRec.Price_Type__c='Original';
        pricRec.WSP__c=70;
        pricRec.SRP__c=80;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c='iTunes';
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='UHD';
        pricRec1.Territory__c='US';
        pricRec1.Price_Type__c='Original';
        pricRec1.WSP__c=60;
        pricRec1.SRP__c=55;
        insert pricRec1;
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c='iTunes';
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='UHD';
        pricRec4.Territory__c='US';
        pricRec4.Price_Type__c='Original';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c='iTunes';
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='UHD';
        pricRec5.Territory__c='US';
        pricRec5.Price_Type__c='Original';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
            DGF_TPRBundlePriceValidationController.validateBundlesInAccountTPR(promotion.id,act.id);
        system.test.stoptest();
    }
    static testmethod void scenario10(){
        account act = new account();
        act.name = 'iTunes account';
        insert act;
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c='iTunes';
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='UHD';
        pricRec.Territory__c='CA';
        pricRec.Price_Type__c='Original';
        pricRec.WSP__c=70;
        pricRec.SRP__c=80;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c='iTunes';
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='UHD';
        pricRec1.Territory__c='CA';
        pricRec1.Price_Type__c='Original';
        pricRec1.WSP__c=60;
        pricRec1.SRP__c=55;
        insert pricRec1;
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c='iTunes';
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='UHD';
        pricRec4.Territory__c='CA';
        pricRec4.Price_Type__c='Original';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c='iTunes';
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='UHD';
        pricRec5.Territory__c='CA';
        pricRec5.Price_Type__c='Original';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
            DGF_TPRBundlePriceValidationController.validateBundlesInAccountTPR(promotion.id,act.id);
        system.test.stoptest();
    }
    static testmethod void scenario11(){
        account act = new account();
        act.name = 'iTunes account';
        insert act;
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('National Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c='iTunes';
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='HD';
        pricRec.Territory__c='CA';
        pricRec.Price_Type__c='Original';
        pricRec.WSP__c=70;
        pricRec.SRP__c=80;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c='iTunes';
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='HD';
        pricRec1.Territory__c='CA';
        pricRec1.Price_Type__c='Original';
        pricRec1.WSP__c=60;
        pricRec1.SRP__c=55;
        insert pricRec1;
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c='iTunes';
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='HD';
        pricRec4.Territory__c='CA';
        pricRec4.Price_Type__c='Original';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c='iTunes';
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='HD';
        pricRec5.Territory__c='CA';
        pricRec5.Price_Type__c='Original';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
            DGF_TPRBundlePriceValidationController.validateBundlesInAccountTPR(promotion.id,act.id);
        system.test.stoptest();
    }
    static testmethod void scenario12(){
        account act = new account();
        act.name = 'iTunes account';
        insert act;
        Id drFilmRecTypeId = Schema.SObjectType.Digital_Release__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        List<Digital_Release__c> insertDG = DGF_TestDataUtility.createDigitalRelease(1,drFilmRecTypeId);
        insertDG[0].Release_State__c='Active';
        insert insertDG;
        Id naionalTRecTypeId = Schema.SObjectType.promotion__c.getRecordTypeInfosByName().get('Account Promotion').getRecordTypeId();
        Promotion__c promotion = new Promotion__c();
        promotion.recordtypeId = naionalTRecTypeId;
        promotion.Visibility__c = 'Visible';
        promotion.Territory__c ='US;CA';
        insert promotion;
        Promotion_Account__c promAct = new Promotion_Account__c();
        promAct.Promotion__c=promotion.id;
        promAct.account__c= act.id;
        insert promAct;
        Id bundleRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Bundle').getRecordTypeId();
        Product__c bundleprod = new Product__c();
        bundleprod.name='Test Bundle Product';
        bundleprod.recordtypeid = bundleRecTypeId;
        bundleprod.X3D__c= true;
        bundleProd.Digital_Release__c=insertDG[0].id;
        insert bundleprod;
        Id filmRecTypeId = Schema.SObjectType.Product__c.getRecordTypeInfosByName().get('Film').getRecordTypeId();
        Product__c prod = new Product__c();
         prod.name='Test Individual Product';
        prod.recordtypeid = filmRecTypeId;
        prod.X3D__c= true;
        insert prod;
        Promotion_Product__c bundlePromoProduct = new Promotion_Product__c();
        bundlePromoProduct.Product__c= bundleprod.id;
        bundlePromoProduct.Promotion__c = promotion.id;
        bundlePromoProduct.TPR_Start_Date__c= system.today();
        bundlePromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert bundlePromoProduct;
        Promotion_Product__c PromoProduct = new Promotion_Product__c();
        PromoProduct.Product__c= prod.id;
        PromoProduct.Promotion__c = promotion.id;
        PromoProduct.TPR_Start_Date__c= system.today();
        PromoProduct.TPR_End_Date__c = system.today().adddays(30);
        insert PromoProduct;
        TM_Version__c tmv = new TM_Version__c();
        tmv.Rating__c = 'A';
        tmv.TM_Version_ID__c = 'TMV96756';
        insert tmv;
        product_version__c prodVersion = new product_version__c();
        prodVersion.Product__c = prod.id;
        prodVersion.TM_Version__c =tmv.id;
        insert prodVersion;
        product_version__c bundleProdVersion = new product_version__c();
        bundleProdVersion.Product__c = bundleProd.id;
        bundleProdVersion.TM_Version__c =tmv.id;
        insert bundleProdVersion;
        Pricing__c pricRec = new Pricing__c();
        pricRec.Account__c='iTunes';
        pricRec.product__c=bundleProd.id;
        pricRec.promotion__c=promotion.id;
        pricRec.platform__C='EST';
        pricRec.Valid_To__c=system.today().adddays(15);
        pricRec.Valid_From__c=system.today().adddays(5);
        pricRec.resolution__c='SD';
        pricRec.Territory__c='CA';
        pricRec.Price_Type__c='Original';
        pricRec.WSP__c=70;
        pricRec.SRP__c=80;
        insert pricRec;
        Pricing__c pricRec1 = new Pricing__c();
        pricRec1.Account__c='iTunes';
        pricRec1.product__c=bundleProd.id;
        pricRec1.promotion__c=promotion.id;
        pricRec1.platform__C='EST';
        pricRec1.Valid_To__c=system.today().adddays(15);
        pricRec1.Valid_From__c=system.today().adddays(6);
        pricRec1.resolution__c='SD';
        pricRec1.Territory__c='CA';
        pricRec1.Price_Type__c='Original';
        pricRec1.WSP__c=60;
        pricRec1.SRP__c=55;
        insert pricRec1;
        Pricing__c pricRec4 = new Pricing__c();
        pricRec4.Account__c='iTunes';
        pricRec4.product__c=Prod.id;
        pricRec4.promotion__c=promotion.id;
        pricRec4.platform__C='EST';
        pricRec4.Valid_To__c=system.today().adddays(15);
        pricRec4.Valid_From__c=system.today().adddays(5);
        pricRec4.resolution__c='SD';
        pricRec4.Territory__c='CA';
        pricRec4.Price_Type__c='Original';
        pricRec4.WSP__c=10;
        pricRec4.SRP__c=40;
        insert pricRec4;
        Pricing__c pricRec5 = new Pricing__c();
        pricRec5.Account__c='iTunes';
        pricRec5.product__c=Prod.id;
        pricRec5.promotion__c=promotion.id;
        pricRec5.platform__C='EST';
        pricRec5.Valid_To__c=system.today().adddays(15);
        pricRec5.Valid_From__c=system.today().adddays(6);
        pricRec5.resolution__c='SD';
        pricRec5.Territory__c='CA';
        pricRec5.Price_Type__c='Original';
        pricRec5.WSP__c=10;
        pricRec5.SRP__c=25;
        insert pricRec5;
        system.test.starttest();
            DGF_TPRBundlePriceValidationController.validateBundlesInAccountTPR(promotion.id,act.id);
            DGF_TPRBundlePriceValidationController.getPromotionAccounts(promotion.id);
        system.test.stoptest();
    }
}